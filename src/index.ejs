<!DOCTYPE html>
<html lang="en">
	<%- include('partials/head.ejs',
	{
		page: 'adblock',
		title: 'AdBlock Tester',
		description: 'Test your ad blocker effectiveness with this comprehensive test. Check how well your ad blocker handles various ad networks, trackers, and analytics services.',
		url: 'adtester.pages.dev',
		preview_thumbnail: '',
		keywords: 'adblock test,ad block test,ad blocker test,adblock,test adblock,analytics,trackers,ads'
	}) %>

<body>
	<!-- Authentication Container -->
	<div id="auth_container" style="display: none;">
		<div class="auth-box">
			<h1>AdBlock Tester</h1>
			<h2>Login Required</h2>
			<form id="login_form">
				<div class="form-group">
					<label for="username">Username</label>
					<input type="text" id="username" name="username" required>
				</div>
				<div class="form-group">
					<label for="password">Password</label>
					<input type="password" id="password" name="password" required>
				</div>
				<div id="error_message" class="error" style="display: none;"></div>
				<button type="submit" class="btn-primary">Login</button>
			</form>
		</div>
	</div>

	<!-- Main Content (Hidden until authenticated) -->
	<div id="main_content" style="display: none;">
		<header class="header">
			<div class="header-content">
				<h1>AdBlock Tester</h1>
				<button id="logout_button" class="btn-secondary">Logout</button>
			</div>
		</header>

		<main>
			<noscript>
				<div class="_bg-red _txt-white _radius _p-1 better_r _py-2 _mt-2">
					<h3>JavaScript is required to run this test. Please enable JavaScript in your browser settings.</h3>
				</div>
			</noscript>

			<section id="m_test" class="_mh-100 _py-2">
				<div>
					<div class="_bg-gray _radius _p-1 better_r _mb-1">
						<p>Test your ad blocker's effectiveness against a wide range of advertising, tracking, and analytics domains.</p>
						<button id="start_test" class="btn-primary">Start Test</button>
					</div>
					
					<div id="test_results" class="_bg-white _radius _p-1 better_r _mb-1" style="display: none; background-color: white !important; color: #333333;">
						<h2>Test Results</h2>
						<div class="results-summary">
							<div class="score-container">
								<div id="score_circle" class="score-circle">
									<span id="score_text">0%</span>
								</div>
							</div>
							<div class="results-details">
								<p><strong>Blocked:</strong> <span id="blocked_count">0</span>/<span id="total_count">0</span></p>
								<p><strong>Ad Servers:</strong> <span id="ads_score">0%</span></p>
								<p><strong>Trackers:</strong> <span id="trackers_score">0%</span></p>
								<p><strong>Analytics:</strong> <span id="analytics_score">0%</span></p>
							</div>
						</div>
						<div id="detailed_results" class="detailed-results">
							<!-- Results will be populated here by JavaScript -->
						</div>
					</div>
					
					<div id="test_running" class="_bg-white _radius _p-1 better_r _mb-1" style="display: none;">
						<h2>Testing in progress...</h2>
						<div class="progress-container">
							<div id="progress_bar" class="progress-bar"></div>
						</div>
						<p id="current_test">Preparing tests...</p>
					</div>
				</div>
			</section>
		</main>
		
		<footer>
			<div class="footer-content">
				<p>&copy; 2025 AdBlock Tester</p>
			</div>
		</footer>
	</div>

	<!-- Add auth script and test scripts -->
	<script src="js/auth.js"></script>
	<script src="js/adblock-test.js" defer></script>

	<style>
		:root {
			--primary-color: #3b82f6;
			--primary-dark: #2563eb;
			--secondary-color: #e5e7eb;
			--text-color: #333333;
			--bg-color: #f8fafc;
			--success-color: #22c55e;
			--error-color: #ef4444;
		}

		body {
			font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
			line-height: 1.6;
			margin: 0;
			padding: 0;
			color: var(--text-color);
			background-color: var(--bg-color);
		}

		/* Auth Box Styles */
		.auth-box {
			max-width: 400px;
			margin: 100px auto;
			padding: 30px;
			background-color: white;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
			border-radius: 8px;
			text-align: center;
		}

		.auth-box h1 {
			margin-bottom: 10px;
			color: var(--primary-color);
		}

		.auth-box h2 {
			margin-bottom: 20px;
			font-weight: normal;
			color: var(--text-color);
		}

		.form-group {
			margin-bottom: 20px;
			text-align: left;
		}

		.form-group label {
			display: block;
			margin-bottom: 5px;
			font-weight: 500;
		}

		.form-group input {
			width: 100%;
			padding: 10px;
			border: 1px solid #d1d5db;
			border-radius: 4px;
			font-size: 16px;
		}

		.error {
			color: var(--error-color);
			margin-bottom: 15px;
			font-weight: 500;
		}

		/* Header and Footer */
		.header {
			background-color: white;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
			padding: 15px 0;
		}

		.header-content {
			display: flex;
			justify-content: space-between;
			align-items: center;
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 20px;
		}

		.header h1 {
			margin: 0;
			color: var(--primary-color);
		}

		footer {
			background-color: white;
			border-top: 1px solid #e5e7eb;
			padding: 20px 0;
			margin-top: 40px;
		}

		.footer-content {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 20px;
			text-align: center;
			color: #64748b;
		}

		/* Main content */
		main {
			max-width: 1200px;
			margin: 40px auto;
			padding: 0 20px;
		}

		/* Button Styles */
		.btn-primary, .btn-secondary {
			padding: 10px 20px;
			border-radius: 4px;
			border: none;
			cursor: pointer;
			font-weight: 500;
			transition: background-color 0.2s;
		}

		.btn-primary {
			background-color: var(--primary-color);
			color: white;
		}

		.btn-primary:hover {
			background-color: var(--primary-dark);
		}

		.btn-secondary {
			background-color: var(--secondary-color);
			color: var(--text-color);
		}

		/* Test Results Styles */
		._radius {
			border-radius: 8px;
		}

		._p-1 {
			padding: 16px;
		}

		._py-2 {
			padding-top: 20px;
			padding-bottom: 20px;
		}

		._mb-1 {
			margin-bottom: 16px;
		}

		._bg-white {
			background-color: white !important;
		}

		._bg-gray {
			background-color: #f1f5f9 !important;
		}

		._bg-red {
			background-color: var(--error-color);
		}

		._txt-white {
			color: white !important;
		}

		@media (max-width: 768px) {
			.auth-box {
				margin: 50px 20px;
				padding: 20px;
			}
		}
	</style>
</body>

</html>
